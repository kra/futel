<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <title>Hello world</title>
  </head>

  <body>
    <h1>Hello World</h1>

    <div id="chartWrapper" class="">
    </div>

    <script>
      const url = "https://futel.github.io/usage/?r=-2w&p=680%7C415%7C410%7C420%7C695%7C445%7C670%7C615%7C405%7C435%7C620%7C655%7C625%7C630&e=contact-status-Avail&a=daily";
      const chartWrapper = document.querySelector("#chartWrapper")
      
      function update() {
          fetch(url)
              .then((response) => {
                  if (!response.ok) {
                      throw new Error(`HTTP error: ${response.status}`);
                  }
                  return response.text();
              })
              .then((text) => {
                  // Create a DOM for the fetched document by parsing the response text.
                  // It would be more efficient to not create a parser each call.
                  const parser = new DOMParser();
                  const htmlDocument = parser.parseFromString(text, "text/html");
                  // Extract the chart and put it in our page.
                  const chart = htmlDocument.documentElement.querySelector("#chart");
                  // XXX this is not helpful, we only fetched the HTML! Need to perform the
                  // script actions to populate!
                  console.log(chart.outerHTML);
                  chartWrapper.appendChild(chart);
              })
              .catch((error) => chartWrapper.textContent = `Could not fetch: ${error}`);
      }
      // Call the update once on page load, in reality we will want this periodically.
      update();
    </script>
  </body>
</html>
